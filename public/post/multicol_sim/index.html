<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.69.2" />
  <meta name="author" content="Fabio Votta">
  <meta name="description" content="Empirical Social and Political Research">

  
  <link rel="alternate" hreflang="en-us" href="/post/multicol_sim/">

  
  


  

  
  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/agate.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-121993278-1', 'auto');
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="favstats - personal blog">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="favstats - personal blog">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/multicol_sim/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@https://twitter.com/favstats">
  <meta property="twitter:creator" content="@https://twitter.com/favstats">
  
  <meta property="og:site_name" content="favstats - personal blog">
  <meta property="og:url" content="/post/multicol_sim/">
  <meta property="og:title" content="How does Collinearity Influence Linear Regressions? | favstats - personal blog">
  <meta property="og:description" content=""><meta property="og:image" content="/img/headers/multicol_header.png">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2018-08-28T00:00:00&#43;02:00">
  
  <meta property="article:modified_time" content="2018-08-28T00:00:00&#43;02:00">
  

  

  <title>How does Collinearity Influence Linear Regressions? | favstats - personal blog</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/"><img src="/img/logo.png" alt="favstats - personal blog"></a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        

        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#publications">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#awards">
            
            <span>Awards</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#teaching">
            
            <span>Teaching</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  
<div class="article-header">
  <img src="/img/headers/multicol_header.png" class="article-banner" itemprop="image">
  <span class="article-header-caption">B-Coefficients Simulation</span>
</div>



  <div class="article-container">
    <div class="article-inner">
      <h1 itemprop="name">How does Collinearity Influence Linear Regressions?</h1>

      

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2018-08-28 00:00:00 &#43;0200 CEST" itemprop="datePublished">
      Aug 28, 2018
    </time>
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    7 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="/post/multicol_sim/#disqus_thread"></a>
  

  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=How%20does%20Collinearity%20Influence%20Linear%20Regressions%3f&amp;url=%2fpost%2fmulticol_sim%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fpost%2fmulticol_sim%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fpost%2fmulticol_sim%2f&amp;title=How%20does%20Collinearity%20Influence%20Linear%20Regressions%3f"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fpost%2fmulticol_sim%2f&amp;title=How%20does%20Collinearity%20Influence%20Linear%20Regressions%3f"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=How%20does%20Collinearity%20Influence%20Linear%20Regressions%3f&amp;body=%2fpost%2fmulticol_sim%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


      <div class="article-style" itemprop="articleBody">
        <p>This is a short simulation study trying to figure out the impact of collinearity on linear regressions.</p>
<p><strong>Overview:</strong></p>
<ul>
<li><a href="#packages">Packages</a></li>
<li><a href="#sim1">Simulation Function</a></li>
<li><a href="#sim2">Simulate and Save Data</a></li>
<li><a href="#coll">Visualizing the Influence of Collinearity</a>
<ul>
<li><a href="#std">Standard Errors</a></li>
<li><a href="#t_stat">T-Statistic and P-Values</a></li>
<li><a href="#b_coef">B-Coefficients</a></li>
<li><a href="#anim">Animation</a></li>
<li><a href="#b_stand">Standardized</a></li>
</ul>
</li>
</ul>
<h2 id="a-idpackagesapackagespackages"><!-- raw HTML omitted --><!-- raw HTML omitted --><a href="#packages">Packages</a></h2>
<p>Load the necessary packages</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e"># install pacman once if not avaible on your machine</span>
<span style="color:#75715e"># install.packages(&#34;pacman&#34;)</span>

pacman<span style="color:#f92672">::</span><span style="color:#a6e22e">p_load</span>(arm, purrr, MASS, broom, ggthemes, tidyverse, ecodist, viridis, gridExtra, grid, lm.beta, tidyr, ggrepel)
</code></pre></div><h2 id="a-idsim1asimulation-functionsim1"><!-- raw HTML omitted --><!-- raw HTML omitted --><a href="#sim1">Simulation Function</a></h2>
<p>First, I write a little function to simulate collinearity.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">generate_multi <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(n, cor_seq){
  <span style="color:#a6e22e">set.seed</span>(<span style="color:#ae81ff">2017</span>)
  x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">runif</span>(n, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>)
  models <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>()
  std.models <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>()
  <span style="color:#a6e22e">for </span>(jj in <span style="color:#a6e22e">seq_along</span>(cor_seq)) {
    <span style="color:#75715e">## generate correlated variable x2</span>
    dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(<span style="color:#a6e22e">corgen</span>(x <span style="color:#f92672">=</span> x, r <span style="color:#f92672">=</span> cor_seq[jj],  epsilon <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>))
    <span style="color:#a6e22e">colnames</span>(dat) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;x1&#34;</span>, <span style="color:#e6db74">&#34;x2&#34;</span>)
    <span style="color:#75715e">## generate y variable</span>
    dat<span style="color:#f92672">$</span>y <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">0.5</span> <span style="color:#f92672">*</span> dat<span style="color:#f92672">$</span>x1 <span style="color:#f92672">+</span> <span style="color:#ae81ff">0.5</span> <span style="color:#f92672">*</span> dat<span style="color:#f92672">$</span>x2 <span style="color:#f92672">+</span> <span style="color:#a6e22e">rnorm</span>(n, sd <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>)
    <span style="color:#75715e">## modelling and tidy dataframe</span>
    models[[jj]] <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tidy</span>(<span style="color:#a6e22e">lm</span>(y <span style="color:#f92672">~</span> x1 <span style="color:#f92672">+</span> x2, data <span style="color:#f92672">=</span> dat))
    <span style="color:#75715e">## get standardized betas</span>
    std.models[[jj]] <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(lm.beta<span style="color:#f92672">::</span><span style="color:#a6e22e">coef.lm.beta</span>((lm.beta<span style="color:#f92672">::</span><span style="color:#a6e22e">lm.beta</span>(<span style="color:#a6e22e">lm</span>(y <span style="color:#f92672">~</span> x1 <span style="color:#f92672">+</span> x2, data <span style="color:#f92672">=</span> dat)))))
    <span style="color:#a6e22e">colnames</span>(std.models[[jj]]) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;std.estimate&#34;</span>)  
    <span style="color:#75715e">## bind it together</span>
    models[[jj]] <span style="color:#f92672">&lt;-</span> std.models[[jj]] <span style="color:#f92672">%&gt;%</span> 
                      <span style="color:#a6e22e">bind_cols</span>(models[[jj]]) 
    models[[jj]]<span style="color:#f92672">$</span>cors <span style="color:#f92672">&lt;-</span> cor_seq[jj]
  }
  sim_dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">bind_rows</span>(models)
  sim_dat<span style="color:#f92672">$</span>col <span style="color:#f92672">&lt;-</span> n
  <span style="color:#a6e22e">return</span>(sim_dat)
}

draw.data <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(cor_seq <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>, step_seq <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>){
    sim.list <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>()
    <span style="color:#a6e22e">for</span>(jj in <span style="color:#a6e22e">seq_along</span>(step_seq)) {
      sim.list[[jj]] <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">generate_multi</span>(n <span style="color:#f92672">=</span> step_seq[jj], cor_seq)
      sim.list[[jj]]<span style="color:#f92672">$</span>n <span style="color:#f92672">&lt;-</span> step_seq[jj]
      
      <span style="color:#a6e22e">cat</span>(<span style="color:#a6e22e">paste0</span>(<span style="color:#e6db74">&#34;Batch: &#34;</span>, jj, <span style="color:#e6db74">&#34;\t&#34;</span>))
      
    } 
    sim_data <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">bind_rows</span>(sim.list)
    <span style="color:#a6e22e">return</span>(sim_data)
}
</code></pre></div><h2 id="a-idsim2asimulate-and-save-datasim2"><!-- raw HTML omitted --><!-- raw HTML omitted --><a href="#sim2">Simulate and Save Data</a></h2>
<p>Draw data from function and save it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">sim_data <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">draw.data</span>(cor_seq <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">.99</span>,<span style="color:#ae81ff">0.01</span>), step_seq <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">10000</span>, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span>))

<span style="color:#a6e22e">if</span>(<span style="color:#f92672">!</span><span style="color:#a6e22e">dir.exists</span>(<span style="color:#e6db74">&#34;data&#34;</span>)) <span style="color:#a6e22e">dir.create</span>(<span style="color:#e6db74">&#34;data&#34;</span>)

<span style="color:#a6e22e">save</span>(sim_data, file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;data/sim_data.Rdata&#34;</span>)
</code></pre></div><h2 id="a-idcollavisualizing-the-influence-of-collinearitycoll"><!-- raw HTML omitted --><!-- raw HTML omitted --><a href="#coll">Visualizing the Influence of Collinearity</a></h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">load</span>(<span style="color:#e6db74">&#34;data/sim_data.Rdata&#34;</span>)
</code></pre></div><p>Now, consider the following linear regression: y ~ x1 + x2.</p>
<p>\begin{equation}
Y = \beta_0 + \beta_1 X_1 + \beta_2 X_2 + \epsilon
\end{equation}</p>
<p>For this simulation, I consistently increase the correlation between x1 and x2 (from 0 to .99) and the sample size (from 50 to 10.000) and estimate separate models for each of these combinations,</p>
<h3 id="a-idstdastandard-errorsstd"><!-- raw HTML omitted --><!-- raw HTML omitted --><a href="#std">Standard Errors</a></h3>
<p>First, I take a look at the impact that sample size and collinearity have on the standard error of x1. On the x-axis, you can see the increasing collinearity between x1 and x2 and the individual lines are colored in by sample size. There are a few things we can observe here: the standard error diminishes with greater sample size, correlations around .75 increase the standard error quite drastically and this effect is weaker the higher your sample size is.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">get_smooths <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(smooth_dat, n_val, y) {
  smooth_dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(smooth_dat, n <span style="color:#f92672">==</span> n_val <span style="color:#f92672">&amp;</span> term <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;x1&#34;</span>)
  fm <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste0</span>(y,<span style="color:#e6db74">&#34; ~ cors&#34;</span>)
  smooth_vals <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">predict</span>(<span style="color:#a6e22e">loess</span>(fm, smooth_dat), smooth_dat<span style="color:#f92672">$</span>cors) 
  
  smooth_dat <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(smooth <span style="color:#f92672">=</span> smooth_vals) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">group_by</span>(n) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">summarise</span>(max_smooth <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>(smooth),
            min_smooth <span style="color:#f92672">=</span> <span style="color:#a6e22e">min</span>(smooth)
            )
}

smooth_dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">10000</span>) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">map_df</span>(<span style="color:#f92672">~</span><span style="color:#a6e22e">get_smooths</span>(sim_data, n_val <span style="color:#f92672">=</span> .x, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;std.error&#34;</span>)) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(n_lab <span style="color:#f92672">=</span> <span style="color:#a6e22e">ifelse</span>(n <span style="color:#f92672">==</span> <span style="color:#ae81ff">50</span>, <span style="color:#e6db74">&#34;Sample Size: 50&#34;</span>, n))

sim_data <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">filter</span>(term <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;x1&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(cors, std.error, colour <span style="color:#f92672">=</span> n, group <span style="color:#f92672">=</span> n)) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;loess&#34;</span>, se <span style="color:#f92672">=</span> F, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">xlab</span>(<span style="color:#a6e22e">expression</span>(<span style="color:#e6db74">&#34;Pearson&#39;s&#34;</span><span style="color:#f92672">~</span>r<span style="color:#f92672">~</span>correlation<span style="color:#f92672">~</span>between<span style="color:#f92672">~</span>x[1]<span style="color:#f92672">~</span>and<span style="color:#f92672">~</span>x[2])) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">ylab</span>(<span style="color:#a6e22e">expression</span>(x[1]<span style="color:#f92672">~</span>Standard<span style="color:#f92672">~</span>Error)) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">theme_hc</span>() <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">scale_color_viridis</span>(<span style="color:#e6db74">&#34;Sample Size&#34;</span>, direction <span style="color:#f92672">=</span> <span style="color:#ae81ff">-1</span>,
       breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>),
       labels <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>)) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">ggtitle</span>(<span style="color:#e6db74">&#34;Sample Size and Collinearity Influence on Standard Error&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_point</span>(data <span style="color:#f92672">=</span> smooth_dat, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">.99</span>, y <span style="color:#f92672">=</span> max_smooth)) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_text_repel</span>(data <span style="color:#f92672">=</span> smooth_dat, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">.99</span>, y <span style="color:#f92672">=</span> max_smooth, label <span style="color:#f92672">=</span> n_lab), 
                  nudge_y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.07</span>, nudge_x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.03</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">guides</span>(colour <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_colourbar</span>(barwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>, label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bottom&#34;</span>))
</code></pre></div><p><img src="https://github.com/favstats/multicol_sim/blob/master/images/std_static.png?raw=true" alt=""><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">ggsave</span>(filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/std_static.png&#34;</span>, width <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>)
</code></pre></div><h3 id="a-idt_statat-statistic-and-p-valuest_stat"><!-- raw HTML omitted --><!-- raw HTML omitted --><a href="#t_stat">T-Statistic and P-Values</a></h3>
<p>Next, let&rsquo;s take a look at the t-statistic and p-values. In line with what you would expect with greater standard errors, statistical significance also suffers from collinearity. Again, greater sample sizes seem to partly remedy this but the shift is clearly observable.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">sim_data  <span style="color:#f92672">%&gt;%</span> 
     <span style="color:#a6e22e">filter</span>(term <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;x1&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
     <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(cors, statistic, colour <span style="color:#f92672">=</span> n, group <span style="color:#f92672">=</span> n)) <span style="color:#f92672">+</span> 
     <span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;loess&#34;</span>, se <span style="color:#f92672">=</span> F, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">xlab</span>(<span style="color:#a6e22e">expression</span>(<span style="color:#e6db74">&#34;Pearson&#39;s&#34;</span><span style="color:#f92672">~</span>r<span style="color:#f92672">~</span>correlation<span style="color:#f92672">~</span>between<span style="color:#f92672">~</span>x[1]<span style="color:#f92672">~</span>and<span style="color:#f92672">~</span>x[2])) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">ylab</span>(<span style="color:#a6e22e">expression</span>(x[1]<span style="color:#f92672">~</span>t<span style="color:#f92672">-</span>Statistic)) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">theme_hc</span>() <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">scale_color_viridis</span>(<span style="color:#e6db74">&#34;Sample Size&#34;</span>, direction <span style="color:#f92672">=</span> <span style="color:#ae81ff">-1</span>,
       breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>),
       labels <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>)) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_hline</span>(yintercept <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.96</span>, linetype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dashed&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.9</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">annotate</span>(geom <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;text&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">2.3</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;t = 1.96&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">ggtitle</span>(<span style="color:#e6db74">&#34;Sample Size and Collinearity Influence on t-Statistic&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">guides</span>(colour <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_colourbar</span>(barwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>, label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bottom&#34;</span>))
</code></pre></div><p><img src="https://github.com/favstats/multicol_sim/blob/master/images/t_static.png?raw=true" alt=""><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">ggsave</span>(filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/t_static.png&#34;</span>, width <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">sim_data  <span style="color:#f92672">%&gt;%</span> 
     <span style="color:#a6e22e">filter</span>(term<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;x1&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
     <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(cors, p.value, colour <span style="color:#f92672">=</span> n, group <span style="color:#f92672">=</span> n)) <span style="color:#f92672">+</span> 
     <span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;loess&#34;</span>, se <span style="color:#f92672">=</span> F, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">xlab</span>(<span style="color:#a6e22e">expression</span>(<span style="color:#e6db74">&#34;Pearson&#39;s&#34;</span><span style="color:#f92672">~</span>r<span style="color:#f92672">~</span>correlation<span style="color:#f92672">~</span>between<span style="color:#f92672">~</span>x[1]<span style="color:#f92672">~</span>and<span style="color:#f92672">~</span>x[2])) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">ylab</span>(<span style="color:#a6e22e">expression</span>(x[1]<span style="color:#f92672">~</span>p<span style="color:#f92672">-</span>value)) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">theme_hc</span>() <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">scale_color_viridis</span>(<span style="color:#e6db74">&#34;Sample Size&#34;</span>, direction <span style="color:#f92672">=</span> <span style="color:#ae81ff">-1</span>,
       breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>),
       labels <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>)) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_hline</span>(yintercept <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.05</span>, linetype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dashed&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.9</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">annotate</span>(geom <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;text&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.08</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;p = 0.05&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">ggtitle</span>(<span style="color:#e6db74">&#34;Sample Size and Collinearity Influence on p-values&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">guides</span>(colour <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_colourbar</span>(barwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>, label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bottom&#34;</span>))
</code></pre></div><p><img src="https://github.com/favstats/multicol_sim/blob/master/images/p_static.png?raw=true" alt=""><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">ggsave</span>(filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/p_static.png&#34;</span>, width <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>)
</code></pre></div><h3 id="a-idb_coefab-coefficientsb_coef"><!-- raw HTML omitted --><!-- raw HTML omitted --><a href="#b_coef">B-Coefficients</a></h3>
<p>This one I find most interesting. In addition to statistical signif. being affected, you can also see how the coefficients change with increasing collinearity. The most drastic impact is for small sample sizes (~1000) where a coefficient of .5 can even become negative.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">sim_data  <span style="color:#f92672">%&gt;%</span>
    <span style="color:#a6e22e">filter</span>(term<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;x1&#34;</span>) <span style="color:#f92672">%&gt;%</span>
    <span style="color:#a6e22e">filter</span>(n<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">200</span>) <span style="color:#f92672">%&gt;%</span>
    <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(cors, estimate, colour <span style="color:#f92672">=</span> n, group <span style="color:#f92672">=</span> n)) <span style="color:#f92672">+</span>
    <span style="color:#a6e22e">geom_hline</span>(yintercept <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, linetype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dashed&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.9</span>) <span style="color:#f92672">+</span>
    <span style="color:#a6e22e">geom_line</span>(alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">xlab</span>(<span style="color:#a6e22e">expression</span>(<span style="color:#e6db74">&#34;Pearson&#39;s&#34;</span><span style="color:#f92672">~</span>r<span style="color:#f92672">~</span>correlation<span style="color:#f92672">~</span>between<span style="color:#f92672">~</span>x[1]<span style="color:#f92672">~</span>and<span style="color:#f92672">~</span>x[2])) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">ylab</span>(<span style="color:#a6e22e">expression</span>(x[1]<span style="color:#f92672">~</span>b<span style="color:#f92672">-</span>coefficient)) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">theme_hc</span>() <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">scale_color_viridis</span>(<span style="color:#e6db74">&#34;Sample Size&#34;</span>, direction <span style="color:#f92672">=</span> <span style="color:#ae81ff">-1</span>,
       breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>),
       labels <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>)) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">annotate</span>(geom <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;text&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.08</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;b = 0.5&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">ggtitle</span>(<span style="color:#e6db74">&#34;Sample Size and Collinearity Influence on b-coefficients&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">guides</span>(colour <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_colourbar</span>(barwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>, label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bottom&#34;</span>))
</code></pre></div><p><img src="https://github.com/favstats/multicol_sim/blob/master/images/b_static.png?raw=true" alt=""><!-- raw HTML omitted --></p>
<h5 id="a-idanimaanimationanim"><!-- raw HTML omitted --><!-- raw HTML omitted --><a href="#anim">Animation</a></h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(gganimate)

sim_data_sub <span style="color:#f92672">&lt;-</span> sim_data  <span style="color:#f92672">%&gt;%</span>
    <span style="color:#a6e22e">filter</span>(term <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;x1&#34;</span>) <span style="color:#f92672">%&gt;%</span>
    <span style="color:#a6e22e">filter</span>(n <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">200</span>) <span style="color:#f92672">%&gt;%</span> 
    <span style="color:#a6e22e">filter</span>(n <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>)) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(estimate_lab <span style="color:#f92672">=</span> <span style="color:#a6e22e">round</span>(estimate, <span style="color:#ae81ff">2</span>) <span style="color:#f92672">%&gt;%</span> as.character) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(n <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(n))


 anim1 <span style="color:#f92672">&lt;-</span>  sim_data_sub  <span style="color:#f92672">%&gt;%</span>
    <span style="color:#75715e"># filter(term == &#34;x1&#34;) %&gt;%</span>
    <span style="color:#75715e"># filter(n &gt; 200) %&gt;%</span>
    <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(cors, estimate, colour <span style="color:#f92672">=</span> n, group <span style="color:#f92672">=</span> n)) <span style="color:#f92672">+</span>
    <span style="color:#a6e22e">geom_hline</span>(yintercept <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, linetype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dashed&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.9</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_line</span>() <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_segment</span>(<span style="color:#a6e22e">aes</span>(xend <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, yend <span style="color:#f92672">=</span> estimate), linetype <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;grey&#39;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_point</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_text</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, label <span style="color:#f92672">=</span> n), hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>, fontface <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bold&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_text</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.15</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.8</span>, label <span style="color:#f92672">=</span> <span style="color:#a6e22e">paste0</span>(<span style="color:#e6db74">&#34;Correlation: &#34;</span>, cors)), 
                hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;black&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_text</span>(<span style="color:#a6e22e">aes</span>(label <span style="color:#f92672">=</span> estimate_lab), hjust <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>, fontface <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bold&#34;</span>, nudge_y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.1</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">xlab</span>(<span style="color:#e6db74">&#34;Pearson&#39;s r correlation between x1 and x2&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">ylab</span>(<span style="color:#e6db74">&#34;x1 b-coefficient&#34;</span>) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">coord_cartesian</span>(clip <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;off&#39;</span>) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">theme_hc</span>() <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">scale_color_viridis</span>(<span style="color:#e6db74">&#34;Sample Size&#34;</span>, 
                      direction <span style="color:#f92672">=</span> <span style="color:#ae81ff">-1</span>, 
                      discrete <span style="color:#f92672">=</span> T,
                      begin <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>,
       <span style="color:#75715e"># limits = seq(1000, 10000, 3000),</span>
       breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>),
       labels <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>)) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">guides</span>(colour <span style="color:#f92672">=</span> F) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">theme</span>(title <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>, face <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bold&#34;</span>), 
        axis.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">14</span>, face <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bold&#34;</span>), 
        axis.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, face <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;italic&#34;</span>)) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">ggtitle</span>(<span style="color:#e6db74">&#34;Sample Size and Collinearity Influence on b-coefficients (Sample Sizes: 300, 1000 and 10.000)&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#75715e"># guides(colour = guide_colourbar(barwidth = 20, label.position = &#34;bottom&#34;)) +</span>
  <span style="color:#75715e"># Here comes the gganimate code</span>
  <span style="color:#a6e22e">transition_reveal</span>(n, cors) 


anim1 <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">animate</span>(
  nframes <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>, fps <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>, width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">600</span>, detail <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
)

<span style="color:#a6e22e">anim_save</span>(<span style="color:#e6db74">&#34;images/b_anim.gif&#34;</span>)
</code></pre></div><p><a href="https://github.com/favstats/multicol_sim/blob/master/images/b_anim.gif?raw=true"><img src="https://github.com/favstats/multicol_sim/blob/master/images/b_anim.gif?raw=true" alt=""></a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">ggsave</span>(filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/b_static.png&#34;</span>, width <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>)
</code></pre></div><h5 id="a-idb_standastandardizedb_stand"><!-- raw HTML omitted --><!-- raw HTML omitted --><a href="#b_stand">Standardized</a></h5>
<p>Same spiel, just this time with standardized coefficients.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">sim_data  <span style="color:#f92672">%&gt;%</span> 
     <span style="color:#a6e22e">filter</span>(term<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;x1&#34;</span>) <span style="color:#f92672">%&gt;%</span> 
     <span style="color:#a6e22e">filter</span>(n<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">200</span>) <span style="color:#f92672">%&gt;%</span>
     <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(cors, std.estimate, colour <span style="color:#f92672">=</span> n, group <span style="color:#f92672">=</span> n)) <span style="color:#f92672">+</span> 
    <span style="color:#a6e22e">geom_line</span>(alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">xlab</span>(<span style="color:#a6e22e">expression</span>(<span style="color:#e6db74">&#34;Pearson&#39;s&#34;</span><span style="color:#f92672">~</span>r<span style="color:#f92672">~</span>correlation<span style="color:#f92672">~</span>between<span style="color:#f92672">~</span>x[1]<span style="color:#f92672">~</span>and<span style="color:#f92672">~</span>x[2])) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">ylab</span>(<span style="color:#a6e22e">expression</span>(x[1]<span style="color:#f92672">~</span>b<span style="color:#f92672">-</span>coefficient)) <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">theme_hc</span>() <span style="color:#f92672">+</span> 
  <span style="color:#a6e22e">scale_color_viridis</span>(<span style="color:#e6db74">&#34;Sample Size&#34;</span>, direction <span style="color:#f92672">=</span> <span style="color:#ae81ff">-1</span>,
       breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>),
       labels <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">10000</span>, <span style="color:#ae81ff">3000</span>)) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">ggtitle</span>(<span style="color:#e6db74">&#34;Sample Size and Collinearity Influence on standardized b-coefficients&#34;</span>) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">guides</span>(colour <span style="color:#f92672">=</span> <span style="color:#a6e22e">guide_colourbar</span>(barwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>, label.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bottom&#34;</span>))
</code></pre></div><p><img src="https://github.com/favstats/multicol_sim/blob/master/images/b_standardized_static.png?raw=true" alt=""><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">ggsave</span>(filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;images/b_standardized_static.png&#34;</span>, width <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>)
</code></pre></div><h5 id="a-idsessionasession-infosession"><!-- raw HTML omitted --><!-- raw HTML omitted --><a href="#session">Session Info</a></h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">sessionInfo</span>()
</code></pre></div><pre><code>## R version 3.5.0 (2018-04-23)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 17134)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
## [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
## [5] LC_TIME=German_Germany.1252    
## 
## attached base packages:
## [1] grid      stats     graphics  grDevices utils     datasets  methods  
## [8] base     
## 
## other attached packages:
##  [1] bindrcpp_0.2.2     ggrepel_0.8.0      lm.beta_1.5-1     
##  [4] gridExtra_2.3      viridis_0.5.1      viridisLite_0.3.0 
##  [7] ecodist_2.0.1      forcats_0.3.0      stringr_1.3.0     
## [10] dplyr_0.7.5        readr_1.1.1        tidyr_0.8.1       
## [13] tibble_1.4.2       ggplot2_3.0.0.9000 tidyverse_1.2.1   
## [16] ggthemes_4.0.0     broom_0.4.4        purrr_0.2.4       
## [19] arm_1.10-1         lme4_1.1-17        Matrix_1.2-14     
## [22] MASS_7.3-49       
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_0.12.18     lubridate_1.7.4  lattice_0.20-35  assertthat_0.2.0
##  [5] rprojroot_1.3-2  digest_0.6.15    psych_1.8.3.3    R6_2.2.2        
##  [9] cellranger_1.1.0 plyr_1.8.4       backports_1.1.2  evaluate_0.10.1 
## [13] coda_0.19-1      httr_1.3.1       pillar_1.2.1     rlang_0.2.1     
## [17] lazyeval_0.2.1   readxl_1.1.0     minqa_1.2.4      rstudioapi_0.7  
## [21] nloptr_1.0.4     rmarkdown_1.9    labeling_0.3     splines_3.5.0   
## [25] foreign_0.8-70   munsell_0.4.3    compiler_3.5.0   modelr_0.1.1    
## [29] pkgconfig_2.0.1  mnormt_1.5-5     htmltools_0.3.6  tidyselect_0.2.4
## [33] crayon_1.3.4     withr_2.1.2      nlme_3.1-137     jsonlite_1.5    
## [37] gtable_0.2.0     pacman_0.4.6     magrittr_1.5     scales_0.5.0    
## [41] cli_1.0.0        stringi_1.1.7    reshape2_1.4.3   xml2_1.2.0      
## [45] tools_3.5.0      glue_1.3.0       hms_0.4.2        abind_1.4-5     
## [49] parallel_3.5.0   yaml_2.1.19      colorspace_1.4-0 rvest_0.3.2     
## [53] knitr_1.20       bindr_0.1.1      haven_1.1.2
</code></pre>

      </div>

      


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="/tags/simulation">simulation</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/dataviz">dataviz</a>
  
</div>



    </div>
  </div>

</article>



<div class="article-container article-widget">
  <div class="hr-light"></div>
  <h3>Related</h3>
  <ul>
    
    <li><a href="/post/ecprconf18/">Analyzing Tweets of the ECPR General Conference 2018</a></li>
    
    <li><a href="/post/terror_map/">Mapping Terror Attacks with Highcharter</a></li>
    
    <li><a href="/post/tidylocations/">Mapping your 2017 Geolocations: The Tidy Way</a></li>
    
  </ul>
</div>




<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "https-favstats-netlify-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      © 2019 Fabio Votta &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    
    <script id="dsq-count-scr" src="//https-favstats-netlify-com.disqus.com/count.js" async></script>
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/clojure.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-tOav5w1OjvsSJzePRtt2uQPFwBoHt1VZcUq8l8nm5284LEKE9FSJBQryzMBzHxY5P0zRdNqEcpLIRVYFNgu1jw==" crossorigin="anonymous"></script>
    
    

  </body>
</html>

